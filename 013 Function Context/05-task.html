<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 05</title>
</head>

<body>
    <label for="guessNumber">Напишите число:</label>
    <input type="number" name="guessNumber">
    <button type="button" id="check-btn">Отправить</button>
    <button type="button" id="new-game-btn">Новая игра</button>
    <script>
        /*
        Задание:
        Напишите сценарии "Игра 'Угадай число'". Суть игры - угадать за меньшее количество попыток число, которое загадал сценарий.
        Каждый раз, когда игрок пытается угадать число, сценарий выводит подсказку - меньшее или большее число было загадано сценарием.
        Сценарий загадывает число только один раз в начале игры и это число не меняется до завершения игры.
        При завершении игры выведите пользователю информацию о том, с какой попытки угадано значение и сколько было потрачено на это времени.

        Для генерации случайного числа используйте следующий код:
        let randomValue = Math.floor(Math.random() * 101); // случайное значение от 0 до 100 будет записано в переменную randomValue
        
        Пример игры:
        Сценарий: я загадал случайное значение от 0 до 100
        Пользователь: 50
        Сценарий: я загадал значение больше, чем 50
        Пользователь: 75
        Сценарий: я загадал значение меньше, чем 75
        Пользователь: 62
        Сценарий: я загадал значение меньше, чем 62
        Пользователь: 56
        Сценарий: Правильно! Загаданное значение 56. Вы угадали с 4й попытки за 10 сек.
        */
        let input = document.querySelector("input");
        let checkBtn = document.querySelector("#check-btn");
        let newGameBtn = document.querySelector("#new-game-btn");

        class GuessGame {
            constructor(maxNum) {
                this.randomNumber = Math.floor(Math.random() * (maxNum + 1));
                this.attempt = 0;
                this.timerCount = 0;
            }
            tickOn() {
                this.timer = setInterval(() => this.timerCount++, 1000);
            }
            tickOff() {
                clearInterval(this.timer);
            }
            getNumber(value) {
                this.possibleNumber = value;
                if (this.possibleNumber < this.randomNumber) {
                    this.attempt++;
                    alert(`я загадал значение больше, чем ${this.possibleNumber}`)
                } else if (this.possibleNumber > this.randomNumber) {
                    this.attempt++;
                    alert(`я загадал значение меньше, чем ${this.possibleNumber}`)
                } else {
                    this.attempt++;
                    this.tickOff();
                    alert(`Правильно! Загаданное значение ${this.randomNumber}. Вы угадали с ${this.attempt}й попытки за ${this.timerCount} сек.`)
                }
            }
        }
        let game = new GuessGame(100);
        game.tickOn();

        function newGame() {
            game = new GuessGame(100);
            game.tickOn();
        }

        function checkNum() {
            game.getNumber(input.value);
            input.value = "";
        }

        checkBtn.addEventListener("click", () => {
            checkNum();
        });
        input.addEventListener("keyup", (e) => {
            if (e.code === "Enter") checkNum();
        })

        newGameBtn.addEventListener("click", newGame);
    </script>
</body>

</html>